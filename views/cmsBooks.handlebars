{{!-- Header with link back to CMS --}}
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="/cms">
        <i class="fa fa-arrow-left" aria-hidden="true"></i>  BACK TO CMS
      </a>
    </div>
  </div>
</nav>

  <!-- Book List -->
 <div class="container">

<h2>Comics &amp; Graphic Novels</h2>
    <div class="row">
      <div class="col-md-12">

      <!-- Search Form -->

      <form class="form-inline">

      <div class="form-group">
        <label for="searchString" class="control-label">SEARCH: &nbsp;</label>
      </div>

      <div class="form-group">
         <label class="radio-inline">
              <input type="radio" name="searchRadio" id="byTitle" value="title" checked="checked"> By Title
            </label>

            <label class="radio-inline">
              <input type="radio" name="searchRadio" id="byCharacter" value="character"> By Character &nbsp;
            </label>
        </div>

        <div class="form-group">       
          <input type="text" class="form-control" id="searchString" placeholder="Wolverine">
        </div>
        
        <button type="button" class="btn btn-default" id="searchButton">Submit</button>

      </form>  

      </div> <!-- End of column -->
    </div> <!-- End of row -->

<hr />
  <div class="row">
    <div class="col-md-12" id="bookList">

      <!-- Book Listing -->
      {{#each books}}
      <a href="/product/{{this.id}}">
      <div class="panel panel-default">
        <div class="panel-body">
        
          <div class="row">
            <div class="col-md-12">
              <h4>{{this.title}} #{{this.issue}} {{this.publish_date}}</h4>
              <p>Publisher: {{this.publisher}} | Role: {{this.role}}</p>
              <p>Database ID: {{this.id}}</p>
              <form action="/cms/edit/{{this.id}}" method="get">
                <button type="sugmit" class="btn btn-default">Edit Book</button>
              </form>
            </div>
          </div>

        </div>
      </div>
      </a>
      {{/each}}

    </div>
  </div>

</div>

<script type="text/javascript">
  $("#searchButton").on("click", function() {
           

            // Pick-up search value
            var searchString = $("#searchString").val().trim();
            searchString = encodeURI(searchString);

            // Pick up radio button value
            var typeSearch = $('input[name="searchRadio"]:checked').val();

            // Determine which route to use for search based on radio button value
            console.log(searchString);

            var currentURL = window.location.origin;


            if (typeSearch == 'character') {
                var url = currentURL+'/cms/character/'+searchString;
                
                window.location.replace (url);
                        

            } else {

                var url = currentURL+'/cms/title/'+searchString;
                
                window.location.replace (url);
                


            }

});
</script>

